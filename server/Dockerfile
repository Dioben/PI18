FROM python:3.9
WORKDIR /app 
# COPY . /app
COPY /server /app
RUN pip3 install -r requirements.txt --no-cache-dir 
ENV ALLOWED_HOSTS=localhost,127.0.0.1
ENV SELF_PORT=8000
ENV DATABASE_HOST=timescaledb
ENV DATABASE_PORT=5432
ENV DATABASE_NAME=nntracker
ENV DATABASE_USER=root
ENV DATABASE_URL=postgres
ENV GRAFANA_BASE_URL=TODO
ENV DEPLOYER_BASE_ADDRESS=TODO
EXPOSE $SELF_PORT
ENTRYPOINT ["python3"] 
CMD manage.py runserver 0.0.0.0:$SELF_PORT
